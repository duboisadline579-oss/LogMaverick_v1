<Window x:Class="LogMaverick.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Log Maverick v3" Closing="Window_Closing"
        Height="850" Width="1450" Background="#0D0D0D">
    <Grid>
        <Grid.RowDefinitions><RowDefinition Height="*"/><RowDefinition Height="28"/></Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="LeftCol" Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Row="0" Background="#141414" BorderBrush="#2A2A2A" BorderThickness="0,0,1,0">
            <Grid Margin="12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <StackPanel>
                    <Grid Margin="0,0,0,6">
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                        <TextBlock Text="LOG MAVERICK v3" Foreground="#4DA6FF" FontSize="15" FontWeight="Black" VerticalAlignment="Center"/>
                        <Button Grid.Column="1" Content="â—€" x:Name="BtnHide" Click="Hide_Click" Width="24" Height="24" Background="#1E1E1E" Foreground="#888" BorderBrush="#333" FontSize="11" ToolTip="íŒ¨ë„ ìˆ¨ê¸°ê¸°/ë³´ì´ê¸°"/>
                    </Grid>
                    <TextBlock Text="â‘  ì„œë²„ ì„ íƒ  â‘¡ CONNECT  â‘¢ íŒŒì¼ ë”ë¸”í´ë¦­" Foreground="#666" FontSize="10" Margin="0,0,0,8"/>
                    <Grid Margin="0,0,0,5">
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="30"/></Grid.ColumnDefinitions>
                        <ComboBox x:Name="SrvList" ItemsSource="{Binding Servers}" SelectedItem="{Binding SelectedServer}" DisplayMemberPath="Alias" Height="32" Foreground="#111" Background="#E8E8E8" BorderBrush="#555" ToolTip="ì—°ê²°í•  ì„œë²„ ì„ íƒ"/>
                        <Button Grid.Column="1" Content="âš™" Click="Config_Click" Width="28" Height="32" Background="#252525" Foreground="#4DA6FF" BorderBrush="#444" FontSize="13" Margin="2,0,0,0" ToolTip="ì„œë²„ ì„¤ì •/ì•Œë¦¼ í‚¤ì›Œë“œ ê´€ë¦¬"/>
                    </Grid>
                    <Button x:Name="BtnConnect" Content="{Binding ConnectButtonText}" Click="Connect_Click" Height="36" Background="{Binding ConnectButtonColor}" IsEnabled="{Binding IsNotLoading}" Foreground="White" FontWeight="Bold" FontSize="12" BorderThickness="0" Margin="0,0,0,5" ToolTip="CONNECT: ì„œë²„ì— ì—°ê²°í•˜ì—¬ íŒŒì¼ ëª©ë¡ ë¡œë“œ&#x0a;DISCONNECT: ì—°ê²° í•´ì œ ë° ë¡œê·¸ ì´ˆê¸°í™”"/>
                    <Border Background="#1C1C1C" BorderBrush="#333" BorderThickness="1" Padding="8,5" CornerRadius="3">
                        <StackPanel>
                            <TextBlock Text="{Binding ConnectionStatusText}" Foreground="{Binding ConnectionStatusColor}" FontSize="11" FontWeight="Bold"/>
                            <TextBlock Text="{Binding ConnectedFile}" Foreground="#666" FontSize="10" TextWrapping="Wrap" Margin="0,2,0,0"/>
                        </StackPanel>
                    </Border>
                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                        <Button Content="ðŸ’¾ ë°±ì—…" Click="Backup_Click" Height="24" Width="130" Background="#1E1E1E" Foreground="#AAAAAA" BorderBrush="#444" FontSize="10" Margin="0,0,4,0" ToolTip="ì„¤ì •ì„ í”„ë¡œê·¸ëž¨ í´ë” backupsì— ì €ìž¥"/>
                        <Button Content="ðŸ“‚ ë³µì›" Click="Restore_Click" Height="24" Width="130" Background="#1E1E1E" Foreground="#AAAAAA" BorderBrush="#444" FontSize="10" ToolTip="ë°±ì—… íŒŒì¼ì—ì„œ ì„¤ì • ë³µì›"/>
                    </StackPanel>
                </StackPanel>
                <Grid Grid.Row="1" Margin="0,10,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                        <TextBlock Text="FILE EXPLORER" Foreground="#777" FontSize="10" FontWeight="Bold" VerticalAlignment="Center"/>
                        <Button Grid.Column="1" Content="ðŸ”„" Click="Refresh_Click" Width="26" Height="22" Background="#1E1E1E" Foreground="#888" BorderBrush="#333" ToolTip="íŒŒì¼ ëª©ë¡ ìƒˆë¡œê³ ì¹¨"/>
                    </Grid>
                    <Grid Grid.Row="1" Margin="0,0,0,4">
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="26"/></Grid.ColumnDefinitions>
                        <TextBox x:Name="TxtTreeSearch" Background="#0D0D0D" Foreground="#DDDDDD" BorderBrush="#444" BorderThickness="1" Height="26" VerticalContentAlignment="Center" Padding="6,0" FontSize="11" TextChanged="TreeSearch_Changed" ToolTip="íŒŒì¼ëª…/í´ë”ëª… ê²€ìƒ‰"/>
                        <TextBlock Grid.Column="0" Text="ðŸ” íŠ¸ë¦¬ ê²€ìƒ‰..." Foreground="#555" FontSize="11" VerticalAlignment="Center" Margin="8,0" IsHitTestVisible="False" x:Name="TreeSearchHint"/>
                        <Button Grid.Column="1" Content="âœ•" Click="ClearTreeSearch_Click" Width="24" Height="26" Background="#1A1A1A" Foreground="#888" BorderThickness="0"/>
                    </Grid>
                    <Border Grid.Row="2" BorderBrush="#333" BorderThickness="1">
                        <Grid>
                            <TreeView x:Name="FileTree" Background="#0A0A0A" Foreground="#CCCCCC" BorderThickness="0" MouseDoubleClick="File_DoubleClick" SelectedItemChanged="FileTree_SelectedItemChanged">
                                <TreeView.Resources>
                                    <Style TargetType="TreeViewItem">
                                        <Setter Property="Foreground" Value="#CCCCCC"/>
                                        <Setter Property="IsExpanded" Value="True"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="#1A4A8A"/>
                                                <Setter Property="Foreground" Value="White"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </TreeView.Resources>
                                <TreeView.ItemTemplate>
                                    <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                        <StackPanel Orientation="Horizontal" ToolTip="{Binding FullPath}">
                                            <TextBlock Text="{Binding Icon}" Margin="0,0,4,0" FontSize="11"/>
                                            <TextBlock Text="{Binding Name}" FontSize="11" Foreground="#DDDDDD"/>
                                        </StackPanel>
                                    </HierarchicalDataTemplate>
                                </TreeView.ItemTemplate>
                            </TreeView>
                            <TextBlock Text="CONNECT ë²„íŠ¼ì„ ëˆŒëŸ¬&#x0a;íŒŒì¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ì„¸ìš”" Foreground="#444" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" IsHitTestVisible="False">
                                <TextBlock.Style><Style TargetType="TextBlock"><Setter Property="Visibility" Value="Collapsed"/><Style.Triggers><DataTrigger Binding="{Binding Items.Count, ElementName=FileTree}" Value="0"><Setter Property="Visibility" Value="Visible"/></DataTrigger></Style.Triggers></Style></TextBlock.Style>
                            </TextBlock>
                        </Grid>
                    </Border>
                    <TextBlock Grid.Row="3" x:Name="TxtFileGuide" Text="ðŸ“„ íŒŒì¼ ì„ íƒ í›„ ë”ë¸”í´ë¦­ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°" Foreground="#666" FontSize="10" TextWrapping="Wrap" Margin="0,4,0,0"/>
                </Grid>
                <Button Grid.Row="2" Click="ErrorBox_Click" Background="{Binding ErrorFlash}" Visibility="{Binding ErrorVisibility}" Margin="0,8,0,0" BorderThickness="0" Padding="8,6" ToolTip="í´ë¦­í•˜ì—¬ ì—ëŸ¬ ížˆìŠ¤í† ë¦¬ ë³´ê¸°">
                    <Grid Width="250">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="âš  EXCEPTIONS " Foreground="#FF8080" FontWeight="Bold" FontSize="12"/>
                            <TextBlock Text="{Binding ErrorHistory.Count}" Foreground="White" FontWeight="Bold" FontSize="14"/>
                            <TextBlock Text=" ê±´" Foreground="#FFB0B0" FontSize="11" Margin="2,0"/>
                        </StackPanel>
                        <Button Content="âœ•" Click="ClearErrors_Click" HorizontalAlignment="Right" Height="22" Width="24" Background="#333" Foreground="#AAA" BorderThickness="0" VerticalAlignment="Center"/>
                    </Grid>
                </Button>
            </Grid>
        </Border>
        <Grid Grid.Column="1" Grid.Row="0">
            <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
            <Border Grid.Row="0" Background="#141414" Padding="10,8" BorderBrush="#2A2A2A" BorderThickness="0,0,0,1">
                <Grid>
                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                    <Grid>
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="26"/></Grid.ColumnDefinitions>
                        <ComboBox x:Name="FilterCombo" IsEditable="True" Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding FilterHistory}" Background="#1A1A1A" Foreground="#DDDDDD" BorderBrush="#444" BorderThickness="1" Height="34" ToolTip="í‚¤ì›Œë“œ í•„í„°ë§. Enterë¡œ ížˆìŠ¤í† ë¦¬ ì €ìž¥. â–¼ë¡œ ìµœê·¼ ê²€ìƒ‰ì–´ ì„ íƒ" KeyDown="Filter_KeyDown"/>
                        <Button Grid.Column="1" Content="âœ•" Click="ClearFilter_Click" Width="24" Height="34" Background="#1A1A1A" Foreground="#888" BorderThickness="0"/>
                    </Grid>
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0">
                        <Button Content="{Binding LevelFilterText}" Width="60" Height="34" Background="#252525" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,6,0" ToolTip="ìš°í´ë¦­: ë¡œê·¸ ë ˆë²¨ í•„í„° ì„ íƒ"><Button.ContextMenu><ContextMenu><MenuItem Header="ALL - ì „ì²´" Click="Level_Click" Tag="ALL"/><MenuItem Header="ERR - ì—ëŸ¬/í¬ë¦¬í‹°ì»¬" Click="Level_Click" Tag="ERROR"/><MenuItem Header="EXC - ì˜ˆì™¸" Click="Level_Click" Tag="EXCEPTION"/><MenuItem Header="SYS - ì‹œìŠ¤í…œ" Click="Level_Click" Tag="SYSTEM"/></ContextMenu></Button.ContextMenu></Button>
                        <Button Content="{Binding PauseStatusText}" Click="Pause_Click" Width="80" Height="34" Background="{Binding PauseButtonColor}" Foreground="White" Margin="0,0,4,0" FontWeight="Bold" ToolTip="ë¡œê·¸ ìˆ˜ì‹  ì¼ì‹œì •ì§€/ìž¬ê°œ"/>
                        <Button Content="{Binding AutoScrollText}" Click="AutoScroll_Click" Width="60" Height="34" Background="#252525" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,4,0" ToolTip="ìžë™ìŠ¤í¬ë¡¤ ON/OFF"/>
                        <Button Content="EXPORT" Click="Export_Click" Width="65" Height="34" Background="#252525" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,4,0" ToolTip="í˜„ìž¬ íƒ­ ì €ìž¥"/>
                        <Button Content="ALLâ†“" Click="ExportAll_Click" Width="45" Height="34" Background="#252525" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,4,0" ToolTip="ì „ì²´ ì €ìž¥"/>
                        <Button Content="CLEAR" Click="Clear_Click" Width="60" Height="34" Background="#252525" Foreground="#CCCCCC" BorderBrush="#444" ToolTip="ë¡œê·¸ ì´ˆê¸°í™”"/>
                        <Button Content="âŠž ì»¬ëŸ¼" Click="ManageColumns_Click" Width="60" Height="34" Background="#252525" Foreground="#CCCCCC" BorderBrush="#444" Margin="4,0,0,0" ToolTip="ì»¬ëŸ¼ í‘œì‹œ/ìˆ¨ê¸°ê¸° ê´€ë¦¬"/>
                    </StackPanel>
                </Grid>
            </Border>
            <TabControl x:Name="MainTabs" Grid.Row="1" SelectionChanged="MainTabs_SelectionChanged" MouseRightButtonUp="Tab_RightClick" Background="Transparent" BorderThickness="0" Margin="8">
                <TabControl.Resources>
                    <ContextMenu x:Key="LogMenu">
                        <MenuItem Header="ðŸ“‹ ë©”ì‹œì§€ ë³µì‚¬" Click="Copy_Click"/>
                        <MenuItem Header="ðŸ” TID ì¶”ì " Click="TraceTid_Click"/>
                        <MenuItem Header="ðŸ”– ë¶ë§ˆí¬" Click="Bookmark_Click"/>
                        <Separator/>
                        <MenuItem Header="ðŸš« ì´ TID ì œì™¸" Click="Exclude_Click"/>
                    </ContextMenu>
                    <Style TargetType="TabItem">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="TabItem">
                                    <Border x:Name="Bd" Background="{TemplateBinding Background}" Padding="14,8" Margin="0,0,2,0">
                                        <ContentPresenter x:Name="Cp" ContentSource="Header" TextBlock.Foreground="#AAAAAA" TextBlock.FontWeight="Bold" TextBlock.FontSize="12"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="#007AFF"/>
                                            <Setter TargetName="Cp" Property="TextBlock.Foreground" Value="#FFFFFF"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="#0055CC"/>
                                            <Setter TargetName="Cp" Property="TextBlock.Foreground" Value="#FFFFFF"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <Style TargetType="ListView">
                        <Setter Property="Background" Value="#0A0A0A"/>
                        <Setter Property="Foreground" Value="#DDDDDD"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="ContextMenu" Value="{StaticResource LogMenu}"/>
                        <Setter Property="VirtualizingStackPanel.IsVirtualizing" Value="True"/>
                        <Setter Property="VirtualizingStackPanel.VirtualizationMode" Value="Recycling"/>
                    </Style>
                </TabControl.Resources>
                <TabItem Header="{Binding MachineTab}" Tag="MACHINE" Background="{Binding MachineFlash}"><ListView ItemsSource="{Binding MachineLogs}" MouseDoubleClick="Log_DoubleClick"><ListView.View><GridView><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="90"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="80"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="730"/></GridView></ListView.View></ListView></TabItem>
                <TabItem Header="{Binding ProcessTab}" Tag="PROCESS" Background="{Binding ProcessFlash}"><ListView ItemsSource="{Binding ProcessLogs}" MouseDoubleClick="Log_DoubleClick"><ListView.View><GridView><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="90"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="80"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="730"/></GridView></ListView.View></ListView></TabItem>
                <TabItem Header="{Binding DriverTab}" Tag="DRIVER" Background="{Binding DriverFlash}"><ListView ItemsSource="{Binding DriverLogs}" MouseDoubleClick="Log_DoubleClick"><ListView.View><GridView><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="90"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="80"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="730"/></GridView></ListView.View></ListView></TabItem>
                <TabItem Header="{Binding OtherTab}" Tag="OTHERS" Background="{Binding OtherFlash}"><ListView ItemsSource="{Binding OtherLogs}" MouseDoubleClick="Log_DoubleClick"><ListView.View><GridView><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="90"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="80"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="730"/></GridView></ListView.View></ListView></TabItem>
            </TabControl>
        </Grid>
        <StatusBar Grid.Row="1" Grid.ColumnSpan="2" Background="#141414" BorderBrush="#2A2A2A" BorderThickness="0,1,0,0">
            <StatusBarItem><TextBlock Text="{Binding StatusMessage}" Foreground="#CCCCCC" FontSize="11" Margin="5,0"/></StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
