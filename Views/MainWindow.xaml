<Window x:Class="LogMaverick.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Log Maverick v3" Closing="Window_Closing"
        Height="850" Width="1450" Background="#0D0D0D">
    <Window.Resources>
        <Style x:Key="TabStyle" TargetType="TabItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border x:Name="Bd" Background="{TemplateBinding Background}" Padding="14,8" Margin="0,0,2,0">
                            <ContentPresenter x:Name="Cp" ContentSource="Header" TextBlock.Foreground="#AAAAAA" TextBlock.FontWeight="Bold" TextBlock.FontSize="12"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="#007AFF"/>
                                <Setter TargetName="Cp" Property="TextBlock.Foreground" Value="#FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="#0055CC"/>
                                <Setter TargetName="Cp" Property="TextBlock.Foreground" Value="#FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions><RowDefinition Height="*"/><RowDefinition Height="28"/></Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="LeftCol" Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Row="0" Background="#141414" BorderBrush="#2A2A2A" BorderThickness="0,0,1,0">
            <Grid Margin="12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <StackPanel>
                    <Grid Margin="0,0,0,6">
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                        <TextBlock Text="LOG MAVERICK v3" Foreground="#4DA6FF" FontSize="15" FontWeight="Black" VerticalAlignment="Center"/>
                        <Button x:Name="BtnHide" Grid.Column="1" Content="â—€" Click="Hide_Click" Width="24" Height="24" Background="#1E1E1E" Foreground="#888" BorderBrush="#333" FontSize="11" ToolTip="íŒ¨ë„ ìˆ¨ê¸°ê¸°/ë³´ì´ê¸°"/>
                    </Grid>
                    <TextBlock Text="â‘  ì„œë²„ ì„ íƒ  â‘¡ CONNECT  â‘¢ íŒŒì¼ ë”ë¸”í´ë¦­" Foreground="#666" FontSize="10" Margin="0,0,0,8"/>
                    <Grid Margin="0,0,0,5">
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="30"/></Grid.ColumnDefinitions>
                        <ComboBox x:Name="SrvList" ItemsSource="{Binding Servers}" SelectedItem="{Binding SelectedServer}" DisplayMemberPath="Alias" Height="32" Foreground="#111" Background="#E8E8E8" BorderBrush="#555"/>
                        <Button Grid.Column="1" Content="âš™" Click="Config_Click" Width="28" Height="32" Background="#252525" Foreground="#4DA6FF" BorderBrush="#444" FontSize="13" Margin="2,0,0,0" ToolTip="ì„œë²„ ì„¤ì •"/>
                    </Grid>
                    <Button Content="{Binding ConnectButtonText}" Click="Connect_Click" Height="36" Background="{Binding ConnectButtonColor}" IsEnabled="{Binding IsNotLoading}" Foreground="White" FontWeight="Bold" FontSize="12" BorderThickness="0" Margin="0,0,0,5"/>
                    <Border Background="#1C1C1C" BorderBrush="#333" BorderThickness="1" Padding="8,5" CornerRadius="3">
                        <StackPanel>
                            <TextBlock Text="{Binding ConnectionStatusText}" Foreground="{Binding ConnectionStatusColor}" FontSize="11" FontWeight="Bold"/>
                            <TextBlock Text="{Binding ConnectedFile}" Foreground="#666" FontSize="10" TextWrapping="Wrap" Margin="0,2,0,0"/>
                        </StackPanel>
                    </Border>
                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                        <Button Content="ðŸ’¾ ë°±ì—…" Click="Backup_Click" Height="24" Width="130" Background="#1E1E1E" Foreground="#AAAAAA" BorderBrush="#444" FontSize="10" Margin="0,0,4,0" ToolTip="ì„¤ì • ë°±ì—…"/>
                        <Button Content="ðŸ“‚ ë³µì›" Click="Restore_Click" Height="24" Width="130" Background="#1E1E1E" Foreground="#AAAAAA" BorderBrush="#444" FontSize="10" ToolTip="ì„¤ì • ë³µì›"/>
                    </StackPanel>
                </StackPanel>
                <Grid Grid.Row="1" Margin="0,10,0,0">
                    <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="*"/><RowDefinition Height="Auto"/></Grid.RowDefinitions>
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                        <TextBlock Text="FILE EXPLORER" Foreground="#777" FontSize="10" FontWeight="Bold" VerticalAlignment="Center"/>
                        <Button Grid.Column="1" Content="ðŸ”„" Click="Refresh_Click" Width="26" Height="22" Background="#1E1E1E" Foreground="#888" BorderBrush="#333" ToolTip="íŒŒì¼ëª©ë¡ ìƒˆë¡œê³ ì¹¨ (ìŠ¤íŠ¸ë¦¬ë° ìœ ì§€)"/>
                    </Grid>
                    <Grid Grid.Row="1" Margin="0,0,0,4">
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="26"/></Grid.ColumnDefinitions>
                        <TextBox x:Name="TxtTreeSearch" Background="#0D0D0D" Foreground="#DDDDDD" BorderBrush="#444" BorderThickness="1" Height="26" VerticalContentAlignment="Center" Padding="6,0" FontSize="11" TextChanged="TreeSearch_Changed" ToolTip="íŒŒì¼/í´ë”ëª… ê²€ìƒ‰. í•˜ìœ„ ê²½ë¡œê¹Œì§€ ê²€ìƒ‰ë¨"/>
                        <TextBlock Grid.Column="0" x:Name="TreeSearchHint" Text="ðŸ” í´ë”/íŒŒì¼ ê²€ìƒ‰..." Foreground="#555" FontSize="11" VerticalAlignment="Center" Margin="8,0" IsHitTestVisible="False"/>
                        <Button Grid.Column="1" Content="âœ•" Click="ClearTreeSearch_Click" Width="24" Height="26" Background="#1A1A1A" Foreground="#888" BorderThickness="0"/>
                    </Grid>
                    <Border Grid.Row="2" BorderBrush="#333" BorderThickness="1">
                        <TreeView x:Name="FileTree" Background="#0A0A0A" BorderThickness="0" MouseDoubleClick="File_DoubleClick" SelectedItemChanged="FileTree_SelectedItemChanged" MouseRightButtonUp="FileTree_RightClick" VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling">
                            <TreeView.Resources>
                                <Style TargetType="TreeViewItem">
                                    <Setter Property="IsExpanded" Value="True"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background" Value="#1A4A8A"/>
                                            <Setter Property="Foreground" Value="White"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </TreeView.Resources>
                            <TreeView.ItemTemplate>
                                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                    <StackPanel Orientation="Horizontal" ToolTip="{Binding FullPath}">
                                        <TextBlock Text="{Binding Icon}" Margin="0,0,4,0" FontSize="11" Foreground="{Binding IconColor}"/>
                                        <TextBlock Text="{Binding Name}" FontSize="11" Foreground="{Binding NameColor2}"/>
                                        <TextBlock Text="{Binding StreamingIcon}" FontSize="11" Foreground="#00FF88" FontWeight="Bold"/>
                                    </StackPanel>
                                </HierarchicalDataTemplate>
                            </TreeView.ItemTemplate>
                        </TreeView>
                    </Border>
                    <TextBlock Grid.Row="3" x:Name="TxtFileGuide" Text="ðŸ“„ ë”ë¸”í´ë¦­: ìŠ¤íŠ¸ë¦¬ë° | ðŸ“ ë”ë¸”í´ë¦­: ìµœì‹ íŒŒì¼ | ìš°í´ë¦­: ì ‘ê¸°/íŽ´ê¸°" Foreground="#666" FontSize="10" TextWrapping="Wrap" Margin="0,4,0,0"/>
                </Grid>
                <Button Grid.Row="2" Click="ErrorBox_Click" Background="{Binding ErrorFlash}" Visibility="{Binding ErrorVisibility}" Margin="0,8,0,0" BorderThickness="0" Padding="8,6" ToolTip="í´ë¦­: ì—ëŸ¬ ížˆìŠ¤í† ë¦¬ ë° ìƒ‰ìƒ í‚¤ì›Œë“œ ê´€ë¦¬">
                    <Grid Width="250">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="âš  EXCEPTIONS " Foreground="#FF8080" FontWeight="Bold" FontSize="12"/>
                            <TextBlock Text="{Binding ErrorHistory.Count}" Foreground="White" FontWeight="Bold" FontSize="14"/>
                            <TextBlock Text=" ê±´" Foreground="#FFB0B0" FontSize="11" Margin="2,0"/>
                        </StackPanel>
                        <Button Content="âœ•" Click="ClearErrors_Click" HorizontalAlignment="Right" Height="22" Width="24" Background="#333" Foreground="#AAA" BorderThickness="0" VerticalAlignment="Center"/>
                    </Grid>
                </Button>
            </Grid>
        </Border>
        <Grid Grid.Column="1" Grid.Row="0">
            <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
            <Button x:Name="BtnShowPanel" Grid.Row="0" Content="â–¶" Click="Hide_Click" Width="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,6,0,0" Background="#1E1E1E" Foreground="#888" BorderBrush="#333" FontSize="11" ToolTip="íŒ¨ë„ ì—´ê¸°" Visibility="Collapsed" Panel.ZIndex="99"/>
            <Border Grid.Row="0" Background="#141414" Padding="10,6" BorderBrush="#2A2A2A" BorderThickness="0,0,0,1">
                <Grid>
                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                    <Grid>
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="26"/></Grid.ColumnDefinitions>
                        <ComboBox x:Name="FilterCombo" IsEditable="True" Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding FilterHistory}" Background="#1A1A1A" Foreground="#DDDDDD" BorderBrush="#444" Height="32" KeyDown="Filter_KeyDown" ToolTip="í‚¤ì›Œë“œ í•„í„°: ìž…ë ¥í›„ Enterë¡œ ì €ìž¥. â–¼ í´ë¦­: ížˆìŠ¤í† ë¦¬. ì˜ˆ) ERROR, Timeout"/>
                        <Button Grid.Column="1" Content="âœ•" Click="ClearFilter_Click" Width="24" Height="32" Background="#1A1A1A" Foreground="#888" BorderThickness="0" ToolTip="í•„í„° ì´ˆê¸°í™”"/>
                    </Grid>
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="6,0,0,0">
                        <Button Content="{Binding LevelFilterText}" Width="70" Height="32" Background="#252525" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,4,0" ToolTip="ìš°í´ë¦­ìœ¼ë¡œ ë ˆë²¨ í•„í„° ì„ íƒ">
                            <Button.ContextMenu><ContextMenu>
                                <MenuItem Header="âœ… ALL - ì „ì²´" Click="Level_Click" Tag="ALL"/>
                                <MenuItem Header="ðŸ”´ ERR - ì—ëŸ¬/í¬ë¦¬í‹°ì»¬" Click="Level_Click" Tag="ERROR"/>
                                <MenuItem Header="ðŸŸ£ EXC - ì˜ˆì™¸" Click="Level_Click" Tag="EXCEPTION"/>
                                <MenuItem Header="ðŸ”µ SYS - ì‹œìŠ¤í…œ" Click="Level_Click" Tag="SYSTEM"/>
                                <MenuItem Header="ðŸŸ¡ WARN - ê²½ê³ " Click="Level_Click" Tag="WARN"/>
                                <MenuItem Header="âšª INFO - ì •ë³´" Click="Level_Click" Tag="INFO"/>
                            </ContextMenu></Button.ContextMenu>
                        </Button>
                        <Button Content="{Binding PauseStatusText}" Click="Pause_Click" Width="80" Height="32" Background="{Binding PauseButtonColor}" Foreground="White" Margin="0,0,4,0" FontWeight="Bold" ToolTip="PAUSE: ë¡œê·¸ ìˆ˜ì‹  ì¤‘ë‹¨. RESUME: ì¤‘ë‹¨êµ¬ê°„ ë¡œê·¸ í•œë²ˆì— ìˆ˜ì‹ "/>
                        <Button Content="{Binding AutoScrollText}" Click="AutoScroll_Click" Width="55" Height="32" Background="#252525" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,4,0" ToolTip="AUTO: ìƒˆ ë¡œê·¸ ìˆ˜ì‹ ì‹œ ìžë™ ìŠ¤í¬ë¡¤. OFF: ìŠ¤í¬ë¡¤ ê³ ì • (ê³¼ê±° íƒìƒ‰)"/>
                        <Button Content="ðŸ’¾ ì €ìž¥" Width="70" Height="32" Background="#252525" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,4,0" ToolTip="ìš°í´ë¦­: ì €ìž¥ ì˜µì…˜ ì„ íƒ">
                            <Button.ContextMenu><ContextMenu>
                                <MenuItem Header="ðŸ“„ í˜„ìž¬ íƒ­ë§Œ ì €ìž¥" Click="Export_Click"/>
                                <MenuItem Header="ðŸ“¦ ì „ì²´ íƒ­ ì €ìž¥ (ì‹œê°„ìˆœ)" Click="ExportAll_Click"/>
                            </ContextMenu></Button.ContextMenu>
                        </Button>
                        <Button Content="CLEAR" Click="Clear_Click" Width="55" Height="32" Background="#252525" Foreground="#CCCCCC" BorderBrush="#444" ToolTip="í™”ë©´ ë¡œê·¸ ì´ˆê¸°í™” (íŒŒì¼ ì˜í–¥ ì—†ìŒ)"/>
                    </StackPanel>
                </Grid>
            </Border>
            <TabControl x:Name="MainTabs" Grid.Row="1" SelectionChanged="MainTabs_SelectionChanged" MouseRightButtonUp="Tab_RightClick" Background="Transparent" BorderThickness="0" Margin="8">
                <TabControl.Resources>
                    <ContextMenu x:Key="LogMenu">
                        <MenuItem Header="ðŸ“‹ ë©”ì‹œì§€ ë³µì‚¬" Click="Copy_Click"/>
                        <MenuItem Header="ðŸ” TID ì¶”ì " Click="TraceTid_Click"/>
                        <MenuItem Header="ðŸ”– ë¶ë§ˆí¬ ì¶”ê°€/í•´ì œ" Click="Bookmark_Click"/>
                        <MenuItem Header="ðŸ“š ë¶ë§ˆí¬ ëª©ë¡" Click="ShowBookmarks_Click"/>
                        <Separator/>
                        <MenuItem Header="ðŸš« ì´ TID ì œì™¸" Click="Exclude_Click"/>
                    </ContextMenu>
                    <ContextMenu x:Key="HeaderMenu">
                        <MenuItem Header="âŠž ì»¬ëŸ¼ í‘œì‹œ/ìˆ¨ê¸°ê¸°" Click="ManageColumns_Click"/>
                    </ContextMenu>
                    <Style TargetType="TabItem" BasedOn="{StaticResource TabStyle}"/>
                    <Style TargetType="ListView">
                        <Setter Property="Background" Value="#0A0A0A"/>
                        <Setter Property="Foreground" Value="#DDDDDD"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="ContextMenu" Value="{StaticResource LogMenu}"/>
                        <Setter Property="VirtualizingStackPanel.IsVirtualizing" Value="True"/>
                        <Setter Property="VirtualizingStackPanel.VirtualizationMode" Value="Recycling"/>
                    </Style>
                    <Style TargetType="GridViewColumnHeader">
                        <Setter Property="Background" Value="#1A1A1A"/>
                        <Setter Property="Foreground" Value="#AAAAAA"/>
                        <Setter Property="BorderBrush" Value="#333"/>
                        <Setter Property="ContextMenu" Value="{StaticResource HeaderMenu}"/>
                    </Style>
                </TabControl.Resources>
                <TabItem Header="{Binding MachineTab}" Tag="MACHINE" Background="{Binding MachineFlash}"><ListView ItemsSource="{Binding MachineView, NotifyOnTargetUpdated=True}" TargetUpdated="LogList_TargetUpdated" MouseDoubleClick="Log_DoubleClick"><ListView.ItemContainerStyle><Style TargetType="ListViewItem"><Setter Property="Foreground" Value="{Binding Color}"/><Style.Triggers><DataTrigger Binding="{Binding IsBookmarked}" Value="True"><Setter Property="Background" Value="#1A3A1A"/></DataTrigger></Style.Triggers></Style></ListView.ItemContainerStyle><ListView.View><GridView><GridViewColumn Header="ðŸ”–" Width="24"><GridViewColumn.CellTemplate><DataTemplate><TextBlock FontSize="11" Foreground="#00C853"><TextBlock.Style><Style TargetType="TextBlock"><Setter Property="Text" Value=""/><Style.Triggers><DataTrigger Binding="{Binding IsBookmarked}" Value="True"><Setter Property="Text" Value="ðŸ”–"/></DataTrigger></Style.Triggers></Style></TextBlock.Style></TextBlock></DataTemplate></GridViewColumn.CellTemplate></GridViewColumn><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="85"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="75"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="670"/></GridView></ListView.View></ListView></TabItem>
                <TabItem Header="{Binding ProcessTab}" Tag="PROCESS" Background="{Binding ProcessFlash}"><ListView ItemsSource="{Binding ProcessView, NotifyOnTargetUpdated=True}" TargetUpdated="LogList_TargetUpdated" MouseDoubleClick="Log_DoubleClick"><ListView.ItemContainerStyle><Style TargetType="ListViewItem"><Setter Property="Foreground" Value="{Binding Color}"/><Style.Triggers><DataTrigger Binding="{Binding IsBookmarked}" Value="True"><Setter Property="Background" Value="#1A3A1A"/></DataTrigger></Style.Triggers></Style></ListView.ItemContainerStyle><ListView.View><GridView><GridViewColumn Header="ðŸ”–" Width="24"><GridViewColumn.CellTemplate><DataTemplate><TextBlock FontSize="11" Foreground="#00C853"><TextBlock.Style><Style TargetType="TextBlock"><Setter Property="Text" Value=""/><Style.Triggers><DataTrigger Binding="{Binding IsBookmarked}" Value="True"><Setter Property="Text" Value="ðŸ”–"/></DataTrigger></Style.Triggers></Style></TextBlock.Style></TextBlock></DataTemplate></GridViewColumn.CellTemplate></GridViewColumn><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="85"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="75"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="670"/></GridView></ListView.View></ListView></TabItem>
                <TabItem Header="{Binding DriverTab}" Tag="DRIVER" Background="{Binding DriverFlash}"><ListView ItemsSource="{Binding DriverView, NotifyOnTargetUpdated=True}" TargetUpdated="LogList_TargetUpdated" MouseDoubleClick="Log_DoubleClick"><ListView.ItemContainerStyle><Style TargetType="ListViewItem"><Setter Property="Foreground" Value="{Binding Color}"/><Style.Triggers><DataTrigger Binding="{Binding IsBookmarked}" Value="True"><Setter Property="Background" Value="#1A3A1A"/></DataTrigger></Style.Triggers></Style></ListView.ItemContainerStyle><ListView.View><GridView><GridViewColumn Header="ðŸ”–" Width="24"><GridViewColumn.CellTemplate><DataTemplate><TextBlock FontSize="11" Foreground="#00C853"><TextBlock.Style><Style TargetType="TextBlock"><Setter Property="Text" Value=""/><Style.Triggers><DataTrigger Binding="{Binding IsBookmarked}" Value="True"><Setter Property="Text" Value="ðŸ”–"/></DataTrigger></Style.Triggers></Style></TextBlock.Style></TextBlock></DataTemplate></GridViewColumn.CellTemplate></GridViewColumn><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="85"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="75"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="670"/></GridView></ListView.View></ListView></TabItem>
            </TabControl>
        </Grid>
        <StatusBar Grid.Row="1" Grid.ColumnSpan="2" Background="#141414" BorderBrush="#2A2A2A" BorderThickness="0,1,0,0">
            <StatusBarItem><TextBlock Text="{Binding LogCountText}" Foreground="#666" FontSize="10" Margin="5,0"/></StatusBarItem>
            <StatusBarItem><TextBlock Text="{Binding StatusMessage}" Foreground="#CCCCCC" FontSize="11" Margin="5,0"/></StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
