<Window x:Class="LogMaverick.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Log Maverick v3" Closing="Window_Closing"
        Height="850" Width="1450" Background="#0A0A0A">
    <Grid>
        <Grid.RowDefinitions><RowDefinition Height="*"/><RowDefinition Height="28"/></Grid.RowDefinitions>
        <Grid.ColumnDefinitions><ColumnDefinition Width="300"/><ColumnDefinition Width="*"/></Grid.ColumnDefinitions>
        <Border Grid.Row="0" Background="#121212" BorderBrush="#222" BorderThickness="0,0,1,0">
            <Grid Margin="12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <StackPanel>
                    <TextBlock Text="LOG MAVERICK v3" Foreground="#007AFF" FontSize="16" FontWeight="Black" Margin="0,0,0,8"/>
                    <TextBlock Text="â‘  ì„œë²„ ì„ íƒ â†’ â‘¡ CONNECT â†’ â‘¢ íŒŒì¼ ë”ë¸”í´ë¦­" Foreground="#555" FontSize="10" Margin="0,0,0,8"/>
                    <Grid Margin="0,0,0,6">
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="32"/></Grid.ColumnDefinitions>
                        <ComboBox x:Name="SrvList" ItemsSource="{Binding Servers}" SelectedItem="{Binding SelectedServer}" DisplayMemberPath="Alias" Height="32" Foreground="#111" Background="#F0F0F0" BorderBrush="#444" ToolTip="ì—°ê²°í•  ì„œë²„ë¥¼ ì„ íƒí•˜ì„¸ìš”"/>
                        <Button Grid.Column="1" Content="âš™" Click="Config_Click" Width="30" Height="32" Background="#2A2A2A" Foreground="#007AFF" BorderBrush="#444" FontSize="14" Margin="2,0,0,0" ToolTip="ì„œë²„ ì„¤ì • ë° ì•Œë¦¼ í‚¤ì›Œë“œ ê´€ë¦¬"/>
                    </Grid>
                    <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                        <Button Content="ðŸ’¾ ë°±ì—…" Click="Backup_Click" Height="24" Width="130" Background="#2A2A2A" Foreground="#888" BorderBrush="#444" FontSize="10" Margin="0,0,4,0" ToolTip="ì„¤ì •ì„ ë°”íƒ•í™”ë©´ì— ë°±ì—…"/>
                        <Button Content="ðŸ“‚ ë³µì›" Click="Restore_Click" Height="24" Width="130" Background="#2A2A2A" Foreground="#888" BorderBrush="#444" FontSize="10" ToolTip="ë°±ì—… íŒŒì¼ì—ì„œ ì„¤ì • ë³µì›"/>
                    </StackPanel>
                    <Button x:Name="BtnConnect" Content="{Binding ConnectButtonText}" Click="Connect_Click" Height="38" Background="{Binding ConnectButtonColor}" IsEnabled="{Binding IsNotLoading}" Foreground="White" FontWeight="Bold" FontSize="13" BorderThickness="0" ToolTip="ì„œë²„ ì—°ê²° í›„ íŒŒì¼ ë”ë¸”í´ë¦­ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë° ì‹œìž‘"/>
                    <Border Background="#1A1A1A" BorderBrush="#333" BorderThickness="1" Padding="8,6" Margin="0,6,0,0" CornerRadius="3">
                        <StackPanel>
                            <TextBlock Text="{Binding ConnectionStatusText}" Foreground="{Binding ConnectionStatusColor}" FontSize="11" FontWeight="Bold"/>
                            <TextBlock Text="{Binding ConnectedFile}" Foreground="#555" FontSize="10" TextWrapping="Wrap" Margin="0,2,0,0"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
                <Grid Grid.Row="1" Margin="0,12,0,0">
                    <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/><RowDefinition Height="Auto"/></Grid.RowDefinitions>
                    <Grid Margin="0,0,0,5">
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                        <TextBlock Text="FILE EXPLORER" Foreground="#555" FontSize="10" FontWeight="Bold" VerticalAlignment="Center"/>
                        <Button Grid.Column="1" Content="ðŸ”„" Click="Refresh_Click" Width="26" Height="22" Background="#2A2A2A" Foreground="#888" BorderBrush="#444" FontSize="11" ToolTip="íŒŒì¼ ëª©ë¡ ìƒˆë¡œê³ ì¹¨"/>
                    </Grid>
                    <Border Grid.Row="1" BorderBrush="#333" BorderThickness="1">
                        <Grid>
                            <TreeView x:Name="FileTree" Background="#0D0D0D" Foreground="#CCC" BorderThickness="0" MouseDoubleClick="File_DoubleClick" SelectedItemChanged="FileTree_SelectedItemChanged">
                                <TreeView.Resources>
                                    <Style TargetType="TreeViewItem">
                                        <Setter Property="Foreground" Value="#CCCCCC"/>
                                        <Setter Property="IsExpanded" Value="True"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="#007AFF"/>
                                                <Setter Property="Foreground" Value="White"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </TreeView.Resources>
                                <TreeView.ItemTemplate>
                                    <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                        <StackPanel Orientation="Horizontal" ToolTip="{Binding FullPath}">
                                            <TextBlock Text="{Binding Icon}" Margin="0,0,5,0" FontSize="11"/>
                                            <TextBlock Text="{Binding Name}" FontSize="11"/>
                                        </StackPanel>
                                    </HierarchicalDataTemplate>
                                </TreeView.ItemTemplate>
                            </TreeView>
                            <TextBlock Text="CONNECT ë²„íŠ¼ì„ ëˆŒëŸ¬&#x0a;íŒŒì¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ì„¸ìš”" Foreground="#444" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" IsHitTestVisible="False">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Items.Count, ElementName=FileTree}" Value="0">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Grid>
                    </Border>
                    <TextBlock Grid.Row="2" x:Name="TxtFileGuide" Text="ðŸ“„ íŒŒì¼ì„ ì„ íƒí•˜ë©´ ê²½ë¡œê°€ í‘œì‹œë©ë‹ˆë‹¤" Foreground="#444" FontSize="10" TextWrapping="Wrap" Margin="0,4,0,0"/>
                </Grid>
                <Border Grid.Row="2" Background="{Binding ErrorFlash}" Visibility="{Binding ErrorVisibility}" Margin="0,8,0,0" CornerRadius="3">
                    <Grid Margin="8,6">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="âš  EXCEPTIONS " Foreground="#FF6B6B" FontWeight="Bold"/>
                            <TextBlock Text="{Binding ErrorHistory.Count}" Foreground="White" FontWeight="Bold"/>
                            <TextBlock Text=" ê±´" Foreground="#FFB0B0" FontSize="11" Margin="2,0"/>
                            <Button Content="ë³´ê¸°" Click="ErrorBox_Click" Height="22" Width="40" Background="#FF4500" Foreground="White" BorderThickness="0" FontSize="10" Margin="6,0,0,0"/>
                        </StackPanel>
                        <Button Content="âœ•" Click="ClearErrors_Click" HorizontalAlignment="Right" Height="22" Width="24" Background="#333" Foreground="#AAA" BorderThickness="0"/>
                    </Grid>
                </Border>
            </Grid>
        </Border>
        <Grid Grid.Column="1" Grid.Row="0">
            <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
            <Border Grid.Row="0" Background="#161616" Padding="10,8" BorderBrush="#222" BorderThickness="0,0,0,1">
                <Grid>
                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                    <Grid>
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="26"/></Grid.ColumnDefinitions>
                        <ComboBox x:Name="FilterCombo" IsEditable="True" Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding FilterHistory}" Background="#0D0D0D" Foreground="White" BorderBrush="#444" BorderThickness="1" Height="34" ToolTip="í‚¤ì›Œë“œ í•„í„°ë§. Enterë¡œ ížˆìŠ¤í† ë¦¬ ì €ìž¥" KeyDown="Filter_KeyDown"/>
                        <Button Grid.Column="1" Content="âœ•" Click="ClearFilter_Click" Width="24" Height="34" Background="#1A1A1A" Foreground="#888" BorderThickness="0" ToolTip="í•„í„° ì´ˆê¸°í™”"/>
                    </Grid>
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0">
                        <Button Content="ALL" Click="Level_Click" Tag="ALL" Width="38" Height="34" Background="{Binding LvAllColor}" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,2,0" ToolTip="ì „ì²´ ë¡œê·¸"/>
                        <Button Content="ERR" Click="Level_Click" Tag="ERROR" Width="38" Height="34" Background="{Binding LvErrColor}" Foreground="#FF6B6B" BorderBrush="#444" Margin="0,0,2,0" ToolTip="ERRORë§Œ"/>
                        <Button Content="EXC" Click="Level_Click" Tag="EXCEPTION" Width="38" Height="34" Background="{Binding LvExcColor}" Foreground="#CC88FF" BorderBrush="#444" Margin="0,0,2,0" ToolTip="EXCEPTIONë§Œ"/>
                        <Button Content="SYS" Click="Level_Click" Tag="SYSTEM" Width="38" Height="34" Background="{Binding LvSysColor}" Foreground="#88CCFF" BorderBrush="#444" Margin="0,0,6,0" ToolTip="SYSTEMë§Œ"/>
                        <Button Content="{Binding PauseStatusText}" Click="Pause_Click" Width="80" Height="34" Background="{Binding PauseButtonColor}" Foreground="White" Margin="0,0,4,0" FontWeight="Bold" ToolTip="ì¼ì‹œì •ì§€/ìž¬ê°œ"/>
                        <Button Content="{Binding AutoScrollText}" Click="AutoScroll_Click" Width="60" Height="34" Background="#2A2A2A" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,4,0" ToolTip="ìžë™ ìŠ¤í¬ë¡¤"/>
                        <Button Content="EXPORT" Click="Export_Click" Width="65" Height="34" Background="#2A2A2A" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,4,0" ToolTip="í˜„ìž¬ íƒ­ ì €ìž¥"/>
                        <Button Content="ALLâ†“" Click="ExportAll_Click" Width="45" Height="34" Background="#2A2A2A" Foreground="#CCCCCC" BorderBrush="#444" Margin="0,0,4,0" ToolTip="ì „ì²´ ì €ìž¥"/>
                        <Button Content="CLEAR" Click="Clear_Click" Width="60" Height="34" Background="#2A2A2A" Foreground="#CCCCCC" BorderBrush="#444" ToolTip="ë¡œê·¸ ì´ˆê¸°í™”"/>
                    </StackPanel>
                </Grid>
            </Border>
            <TabControl x:Name="MainTabs" Grid.Row="1" SelectionChanged="MainTabs_SelectionChanged" MouseRightButtonUp="Tab_RightClick" Background="Transparent" BorderThickness="0" Margin="8">
                <TabControl.Resources>
                    <ContextMenu x:Key="LogMenu">
                        <MenuItem Header="ðŸ“‹ ë©”ì‹œì§€ ë³µì‚¬" Click="Copy_Click"/>
                        <MenuItem Header="ðŸ” TID ì¶”ì " Click="TraceTid_Click"/>
                        <MenuItem Header="ðŸ”– ë¶ë§ˆí¬" Click="Bookmark_Click"/>
                        <Separator/>
                        <MenuItem Header="ðŸš« ì´ TID ì œì™¸" Click="Exclude_Click"/>
                    </ContextMenu>
                    <Style TargetType="TabItem">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="TabItem">
                                    <Border x:Name="Bd" Background="{TemplateBinding Background}" Padding="14,8" Margin="0,0,2,0">
                                        <ContentPresenter x:Name="Cp" ContentSource="Header" TextBlock.Foreground="#AAAAAA" TextBlock.FontWeight="Bold" TextBlock.FontSize="12"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="#007AFF"/>
                                            <Setter TargetName="Cp" Property="TextBlock.Foreground" Value="#FFFFFF"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="#0055CC"/>
                                            <Setter TargetName="Cp" Property="TextBlock.Foreground" Value="#FFFFFF"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <Style TargetType="ListView">
                        <Setter Property="Background" Value="#0A0A0A"/>
                        <Setter Property="Foreground" Value="#DDDDDD"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="ContextMenu" Value="{StaticResource LogMenu}"/>
                        <Setter Property="VirtualizingStackPanel.IsVirtualizing" Value="True"/>
                        <Setter Property="VirtualizingStackPanel.VirtualizationMode" Value="Recycling"/>
                    </Style>
                </TabControl.Resources>
                <TabItem Header="{Binding MachineTab}" Tag="MACHINE" Background="{Binding MachineFlash}"><ListView ItemsSource="{Binding MachineLogs}" MouseDoubleClick="Log_DoubleClick"><ListView.View><GridView><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="90"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="80"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="730"/></GridView></ListView.View></ListView></TabItem>
                <TabItem Header="{Binding ProcessTab}" Tag="PROCESS" Background="{Binding ProcessFlash}"><ListView ItemsSource="{Binding ProcessLogs}" MouseDoubleClick="Log_DoubleClick"><ListView.View><GridView><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="90"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="80"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="730"/></GridView></ListView.View></ListView></TabItem>
                <TabItem Header="{Binding DriverTab}" Tag="DRIVER" Background="{Binding DriverFlash}"><ListView ItemsSource="{Binding DriverLogs}" MouseDoubleClick="Log_DoubleClick"><ListView.View><GridView><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="90"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="80"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="730"/></GridView></ListView.View></ListView></TabItem>
                <TabItem Header="{Binding OtherTab}" Tag="OTHERS" Background="{Binding OtherFlash}"><ListView ItemsSource="{Binding OtherLogs}" MouseDoubleClick="Log_DoubleClick"><ListView.View><GridView><GridViewColumn Header="Time" DisplayMemberBinding="{Binding Time, StringFormat={}{0:HH:mm:ss}}" Width="90"/><GridViewColumn Header="TID" DisplayMemberBinding="{Binding Tid}" Width="70"/><GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="80"/><GridViewColumn Header="Message" DisplayMemberBinding="{Binding Message}" Width="730"/></GridView></ListView.View></ListView></TabItem>
            </TabControl>
        </Grid>
        <StatusBar Grid.Row="1" Grid.ColumnSpan="2" Background="#1A1A1A" BorderBrush="#333" BorderThickness="0,1,0,0">
            <StatusBarItem><TextBlock Text="{Binding StatusMessage}" Foreground="#CCCCCC" FontSize="11" Margin="5,0"/></StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
